# N1安装Openwrt配置旁路由

##刷入固件到N1
1. 下载固件写入工具https://etcher.balena.io/
2. 将固件写入到u盘
3. u盘插入N1后接通N1电源启动
4. 通过网线连接电脑到n1，登陆后台。默认地址192.168.1.1，用户名root，密码password
5. 在后台打开网页版ttyd终端，执行命令
   ./install-to-emmc.sh
6. 等待指令完成，按照提示拔出U盘，并断电重启N1

#配置旁路由IP地址
1. 用浏览器登录OPENWRT后台，打开网络>接口>lan>
   协议改成静态地址
   修改地址为你想要设置的旁路由地址。根据将要连接的主路由地址而定，比如主路由为192.168.0.1，那么旁路由地址可以改为192.168.0.x。为了避免改地址已经被连接主路由的设备占用，建议可以设置成后面一点的IP地址，比如192.168.0.111
   网关改为主路由地址192.168.0.1
2. 完成后可以将N1网线连接至主路由的lan接口
3. 电脑连接到主路由，此时可以通过地址192.168.0.111连接到旁路由，地址192.168.0.1连接到主路由。

#配置trojan
设置ssr代理服务器。打开shadowsocksr plus+，添加服务器节点，节点类型选择trojan，服务器地址sg.vpn.xxx.com, 端口443，密码xxxxxx
trojan服务器需要自己搭建
设置完成后可以到ssr的状态页面测试一下联网情况
如果想要启动sockets服务器，可以到高级配置下配置“SOCKS5 代理服务端（全局”
 
#配置DHCP
1. DHCP根据需要设置。如果不需要全部网络都旁路由，勾选“忽略此接口”，后面步骤不需要继续。
2. 如果网络需要全部都通过旁路由，设置强制旁路由为dhcp服务器，并且需要关闭主路由的dhcp服务，并且主路由网关需要改成旁路由地址192.168.0.111
   dhcp服务有时需要一段时间生效，可以重新连接网络看看当前自动分配的ip连接网关是否为旁路由

